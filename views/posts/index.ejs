
    <!-- ======= Breadcrumbs ======= -->
    <div class="breadcrumbs">
        <div class="page-header d-flex align-items-center" style="background-image: url('/stylesheets/img/page-header.jpg');">
          <div class="container position-relative">
            <div class="row d-flex justify-content-center">
              <div class="col-lg-6 text-center">
                <h2>Propuestas</h2>
                <p>Odio et unde deleniti. Deserunt numquam exercitationem. Officiis quo odio sint voluptas consequatur ut a odio voluptatem. Sit dolorum debitis veritatis natus dolores. Quasi ratione sint. Sit quaerat ipsum dolorem.</p>
              </div>
            </div>
          </div>
        </div>
        <nav>
          <div class="container">
            <ol>
              <li><a href="/">Menu</a></li>
              <li>Propuestas</li>
            </ol>
          </div>
        </nav>
      </div>
      <!-- End Breadcrumbs -->
    <section>
    <div class="row">
      <div class="col-md-6">
        <h2>Propuestas:</h2>

        <!-- Filtro de propuestas -->
        <div class="container mt-3">
          <div class="row">
            <div class="col-md-6">
              <form method="GET" action="/posts/filter" class="form-inline">
                <label class="mr-2" for="filter">Filter by:</label>
                <select class="form-control mr-2" name="filter" id="filter">
                    <option value="" <%= filterType === '' ? 'selected' : '' %>>All</option>
                    <option value="not-started" <%= filterType === 'not-started' ? 'selected' : '' %>>Not started</option>
                    <option value="in-progress" <%= filterType === 'in-progress' ? 'selected' : '' %>>In progress</option>
                    <option value="finished" <%= filterType === 'finished' ? 'selected' : '' %>>Finished</option>
                    <option value="vetoed" <%= filterType === 'vetoed' ? 'selected' : '' %>>Vetoed</option>
                </select>
                <button type="submit" class="btn btn-primary">Filter</button>
              </form>
            </div>
          </div>
        </div>

        <% for (var i in posts) { %>
            <% var post = posts[i]; %>
            <article class="postShow">
                <h3 class="postTitle"><%= post.title %></h3>
                <%- include('../attachments/_attachment', { post: post }) %>
                <div class="postOptions">
                    <a class="button-2" href="/posts/<%= post.id %>">Show</a>
                    <% if(locals.loginUser?.id === post.authorId || locals.loginUser?.isAdmin || locals.loginUser?.isAdminProposal) {%>
                    <a class="button-2" href="/posts/<%= post.id %>/edit">Edit</a>
                    <% } %>
                    <% if(locals.loginUser?.id === post.authorId || locals.loginUser?.isAdmin || locals.loginUser?.isAdminProposal) {%>
                    <a class="button-2" href="/posts/<%= post.id %>?_method=DELETE" onClick="return confirm('Delete: <%= post.title %>');">Delete</a>
                    <% } %>
                </div>
                <div>
                    <small id="author">By <b><%= post.author?.username ?? "Anonymous" %></b> </small>
                </div>
            </article>
        <% } %>
        <div>
        <% if(locals.loginUser?.isAdmin || locals.loginUser?.isAdminProposal) {%>
        <a href="/posts/new">Create New Post</a>
        <% } %>

          <!-- Registro de propuestas eliminadas -->
          <h3>Propuestas Eliminadas:</h3>
          <% if (deletedPosts && deletedPosts.length > 0) { %>
              <% for (var i in deletedPosts) { %>
                  <% var deletedPost = deletedPosts[i]; %>
                  <article class="postShow">
                      <h3 class="postTitle"><%= deletedPost.title %></h3>
                      <!-- <%- include('../attachments/_attachmentDeletedPosts', { deletedPost: deletedPost }) %> -->
                      <div>
                          <small class="deletedBy">Eliminado por: <b><%= deletedPost.deletedBy ?? "Anonymous" %></b> </small>
                      </div>
                      <div>
                          <small class="deletedAt">Fecha de eliminación: <b><%= deletedPost.deletedAt?.toLocaleDateString() ?? "Unknown" %></b> </small>
                      </div>
                  </article>
              <% } %>
          <% } else { %>
              <p>No hay propuestas eliminadas.</p>
          <% } %>

      </div>
      <!-- <div class="col-md-6"></div>
        <div>
          <a href="/posts/calculate-reputation" class="button-2">Calcular Reputación</a>
        </div>
        <div>
          <a href="/posts/apply-rewards" class="button-2">Aplicar Rewards de Votación</a>
        </div>
      </div> -->
    </div>
</section>
